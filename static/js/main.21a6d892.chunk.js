(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{16:function(e,t,c){},39:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),o=c(4),r=c.n(o),s=(c(15),c(16),c(3)),i=c(7),u=(c(17),c(1));function l(e){var t=Object(a.useState)(""),c=Object(s.a)(t,2),n=c[0],o=c[1];return Object(u.jsx)("header",{className:"Searchbar",children:Object(u.jsxs)("form",{className:"SearchForm",onSubmit:function(t){t.preventDefault(),""!==n.trim()?(e.onSubmit(n,1),o("")):i.b.error("Enter the name of your picture theme")},children:[Object(u.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(u.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(u.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"on",autoFocus:!0,placeholder:"Search images and photos",value:n,onChange:function(e){o(e.target.value)}})]})})}var j=c(9),b=c(10),m=c.n(b);function h(){return Object(u.jsx)(m.a,{type:"Grid",color:"#00BFFF",height:80,width:80,timeout:5e3,className:"loader"})}var d={getData:function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,a="https://pixabay.com/api/",n="11753469-fae5ae7c0c549b8c5c7373ba2",o="".concat(a,"?q=").concat(e,"&page=").concat(t,"&key=").concat(n,"&image_type=photo&orientation=horizontal&per_page=").concat(c);return fetch(o).then((function(t){return t.ok?t.json():Promise.reject(new Error("\u041d\u0435\u0442 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(e)))}))}},O=d,g=function(e){var t=e.imageQuery,c=e.openModal;return Object(u.jsx)(u.Fragment,{children:t.map((function(e){var t=e.id,a=e.webformatURL,n=e.largeImageURL,o=e.tags;return Object(u.jsx)("li",{className:"ImageGalleryItem",onClick:function(){return c(n)},children:Object(u.jsx)("img",{src:a,alt:o,className:"ImageGalleryItem-image"})},t)}))})},f=function(e){var t=e.onPushButton;return Object(u.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})},p=document.querySelector("#modal-root");function x(e){Object(a.useEffect)((function(){return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}));var t=function(t){"Escape"===t.code&&e.closeModal()};return Object(o.createPortal)(Object(u.jsx)("div",{className:"Overlay",onClick:function(t){t.currentTarget===t.target&&e.closeModal()},children:Object(u.jsx)("div",{className:"Modal",children:Object(u.jsx)("img",{src:e.largeImage,alt:""})})}),p)}function y(e){var t=Object(a.useState)([]),c=Object(s.a)(t,2),n=c[0],o=c[1],r=Object(a.useState)(""),i=Object(s.a)(r,2),l=i[0],b=i[1],m=Object(a.useState)(!1),d=Object(s.a)(m,2),p=d[0],y=d[1],v=Object(a.useState)(!1),S=Object(s.a)(v,2),w=S[0],N=S[1];function k(){N(!0),setTimeout((function(){O.getData(e.searchQuery,e.page).then((function(t){1===e.page?o(t.hits):(o((function(e){return[].concat(Object(j.a)(e),Object(j.a)(t.hits))})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}))})).finally((function(){N(!1),e.setPage((function(e){return e+1}))}))}),200)}Object(a.useEffect)((function(){e.searchQuery&&(o([]),k())}),[e.searchQuery]);return Object(u.jsxs)(a.Fragment,{children:[Object(u.jsx)("ul",{className:"ImageGallery",children:Object(u.jsx)(g,{imageQuery:n,openModal:function(e){y(!0),b(e)}})}),0===n.length&&Object(u.jsx)("p",{children:'No images for your request "'.concat(e.searchQuery,'"')}),p&&Object(u.jsx)(x,{closeModal:function(){y(!1),b("")},largeImage:l}),w&&Object(u.jsx)(h,{}),n.length>0&&Object(u.jsx)(f,{onPushButton:k})]})}function v(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),c=t[0],n=t[1],o=Object(a.useState)(1),r=Object(s.a)(o,2),j=r[0],b=r[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)(l,{onSubmit:function(e,t){n(e),b(t)}}),Object(u.jsx)(i.a,{autoClose:3e3}),Object(u.jsx)(y,{searchQuery:c,page:j,setPage:b})]})}r.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(v,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.21a6d892.chunk.js.map